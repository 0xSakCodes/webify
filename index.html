<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Swagkart Admin Panel</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Inter', sans-serif;
    }
    
    .stat-card {
      transition: transform 0.2s;
    }
    
    .stat-card:hover {
      transform: translateY(-2px);
    }
    
    .page {
      display: none;
      animation: fadeIn 0.3s ease-in-out;
    }
    
    .page.active {
      display: block;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .sidebar-item {
      transition: all 0.2s;
    }
    
    .sidebar-item:hover {
      background-color: #f3f4f6;
    }
    
    .sidebar-item.active {
      background-color: #ede9fe;
      border-left: 3px solid #8b5cf6;
      color: #8b5cf6;
    }
    
    .table-row:hover {
      background-color: #f9fafb;
    }
    
    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: #8b5cf6;
      box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
    }
    
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 9999;
      animation: fadeIn 0.2s;
    }
    
    .modal.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .modal-content {
      background: white;
      border-radius: 1rem;
      max-width: 600px;
      width: 90%;
      max-height: 90%;
      overflow-y: auto;
      animation: slideUp 0.3s;
    }
    
    @keyframes slideUp {
      from { transform: translateY(50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #1f2937;
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      z-index: 99999;
      transform: translateX(400px);
      transition: transform 0.3s ease;
    }
    
    .toast.show {
      transform: translateX(0);
    }
    
    .toast.success {
      background: #10b981;
    }
    
    .toast.error {
      background: #ef4444;
    }
    
    .badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 600;
    }
    
    .badge.pending {
      background-color: #fef3c7;
      color: #92400e;
    }
    
    .badge.confirmed {
      background-color: #dbeafe;
      color: #1e40af;
    }
    
    .badge.packed {
      background-color: #e0e7ff;
      color: #4338ca;
    }
    
    .badge.shipped {
      background-color: #fce7f3;
      color: #9f1239;
    }
    
    .badge.delivered {
      background-color: #d1fae5;
      color: #065f46;
    }
    
    .badge.cancelled {
      background-color: #fee2e2;
      color: #991b1b;
    }
    
    .chart-container {
      position: relative;
      height: 300px;
    }
    
    .loading-spinner {
      border: 3px solid #f3f4f6;
      border-top: 3px solid #8b5cf6;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="h-full bg-gray-50">
  <div id="app" class="h-full flex overflow-hidden"><!-- Sidebar -->
   <aside class="w-64 bg-white border-r border-gray-200 flex flex-col">
    <div class="p-6 border-b border-gray-200">
     <div class="flex items-center gap-3">
      <div class="w-10 h-10 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-lg flex items-center justify-center">
       <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
       </svg>
      </div>
      <div>
       <h1 id="panel-title" class="text-lg font-bold text-gray-900">Swagkart</h1>
       <p class="text-xs text-gray-500">Admin Panel</p>
      </div>
     </div>
    </div>
    <nav class="flex-1 p-4 overflow-y-auto">
     <div class="space-y-1"><button onclick="navigateTo('dashboard')" class="sidebar-item active w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left font-medium">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
       </svg> Dashboard </button> <button onclick="navigateTo('orders')" class="sidebar-item w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left font-medium text-gray-700">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
       </svg> Orders <span id="orders-badge" class="ml-auto bg-purple-600 text-white text-xs px-2 py-1 rounded-full">0</span> </button> <button onclick="navigateTo('products')" class="sidebar-item w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left font-medium text-gray-700">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
       </svg> Products </button> <button onclick="navigateTo('customers')" class="sidebar-item w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left font-medium text-gray-700">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
       </svg> Customers </button> <button onclick="navigateTo('analytics')" class="sidebar-item w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left font-medium text-gray-700">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
       </svg> Analytics </button> <button onclick="navigateTo('settings')" class="sidebar-item w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left font-medium text-gray-700">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
       </svg> Settings </button>
     </div>
    </nav>
    <div class="p-4 border-t border-gray-200">
     <div class="flex items-center gap-3 px-4 py-3">
      <div class="w-10 h-10 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-full flex items-center justify-center text-white font-semibold">
       A
      </div>
      <div class="flex-1">
       <p class="font-medium text-sm text-gray-900">Admin</p>
       <p class="text-xs text-gray-500">admin@swagkart.com</p>
      </div>
     </div>
    </div>
   </aside><!-- Main Content -->
   <main class="flex-1 overflow-auto"><!-- Dashboard Page -->
    <div id="dashboard-page" class="page active">
     <div class="p-8">
      <div class="flex items-center justify-between mb-8">
       <div>
        <h2 class="text-3xl font-bold text-gray-900">Dashboard</h2>
        <p class="text-gray-500 mt-1">Welcome back, Admin</p>
       </div><button onclick="refreshDashboard()" class="px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
        </svg> Refresh </button>
      </div><!-- Stats Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
       <div class="stat-card bg-white rounded-xl p-6 border border-gray-200">
        <div class="flex items-center justify-between">
         <div>
          <p class="text-sm text-gray-500 font-medium">Total Orders</p>
          <p id="stat-total-orders" class="text-3xl font-bold text-gray-900 mt-2">0</p>
          <p class="text-sm text-green-600 mt-2">â†‘ 12% from last month</p>
         </div>
         <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
          <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
          </svg>
         </div>
        </div>
       </div>
       <div class="stat-card bg-white rounded-xl p-6 border border-gray-200">
        <div class="flex items-center justify-between">
         <div>
          <p class="text-sm text-gray-500 font-medium">Revenue</p>
          <p id="stat-revenue" class="text-3xl font-bold text-gray-900 mt-2">â‚¹0</p>
          <p class="text-sm text-green-600 mt-2">â†‘ 8% from last month</p>
         </div>
         <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
          <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
         </div>
        </div>
       </div>
       <div class="stat-card bg-white rounded-xl p-6 border border-gray-200">
        <div class="flex items-center justify-between">
         <div>
          <p class="text-sm text-gray-500 font-medium">Total Products</p>
          <p id="stat-total-products" class="text-3xl font-bold text-gray-900 mt-2">0</p>
          <p class="text-sm text-blue-600 mt-2">3 new this week</p>
         </div>
         <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
          <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
          </svg>
         </div>
        </div>
       </div>
       <div class="stat-card bg-white rounded-xl p-6 border border-gray-200">
        <div class="flex items-center justify-between">
         <div>
          <p class="text-sm text-gray-500 font-medium">Customers</p>
          <p id="stat-customers" class="text-3xl font-bold text-gray-900 mt-2">0</p>
          <p class="text-sm text-green-600 mt-2">â†‘ 5% from last month</p>
         </div>
         <div class="w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center">
          <svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
          </svg>
         </div>
        </div>
       </div>
      </div><!-- Recent Orders -->
      <div class="bg-white rounded-xl border border-gray-200 mb-8">
       <div class="p-6 border-b border-gray-200">
        <div class="flex items-center justify-between">
         <h3 class="text-lg font-semibold text-gray-900">Recent Orders</h3><button onclick="navigateTo('orders')" class="text-sm text-purple-600 hover:text-purple-700 font-medium">View All â†’</button>
        </div>
       </div>
       <div id="recent-orders-table" class="overflow-x-auto"><!-- Table will be populated by JavaScript -->
       </div>
      </div><!-- Quick Stats -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
       <div class="bg-white rounded-xl border border-gray-200 p-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Order Status Distribution</h3>
        <div id="order-status-chart" class="space-y-3"><!-- Chart will be populated by JavaScript -->
        </div>
       </div>
       <div class="bg-white rounded-xl border border-gray-200 p-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Top Products</h3>
        <div id="top-products-list" class="space-y-3"><!-- List will be populated by JavaScript -->
        </div>
       </div>
      </div>
     </div>
    </div><!-- Orders Page -->
    <div id="orders-page" class="page">
     <div class="p-8">
      <div class="flex items-center justify-between mb-8">
       <div>
        <h2 class="text-3xl font-bold text-gray-900">Orders Management</h2>
        <p class="text-gray-500 mt-1">Manage and track all customer orders</p>
       </div>
       <div class="flex gap-3"><select id="order-filter" onchange="filterOrders(this.value)" class="px-4 py-2 border border-gray-300 rounded-lg bg-white"> <option value="all">All Orders</option> <option value="pending">Pending</option> <option value="confirmed">Confirmed</option> <option value="packed">Packed</option> <option value="shipped">Shipped</option> <option value="delivered">Delivered</option> <option value="cancelled">Cancelled</option> </select>
       </div>
      </div>
      <div class="bg-white rounded-xl border border-gray-200">
       <div class="overflow-x-auto">
        <table class="w-full">
         <thead class="bg-gray-50 border-b border-gray-200">
          <tr>
           <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Order ID</th>
           <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Customer</th>
           <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Product</th>
           <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Amount</th>
           <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Status</th>
           <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Date</th>
           <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Actions</th>
          </tr>
         </thead>
         <tbody id="orders-table-body" class="divide-y divide-gray-200"><!-- Orders will be populated by JavaScript -->
         </tbody>
        </table>
       </div>
       <div id="no-orders-message" class="p-12 text-center hidden">
        <div class="text-6xl mb-4">
         ðŸ“¦
        </div>
        <h3 class="text-lg font-semibold text-gray-800">No orders found</h3>
        <p class="text-gray-500 mt-1">Orders will appear here when customers place them</p>
       </div>
      </div>
     </div>
    </div><!-- Products Page -->
    <div id="products-page" class="page">
     <div class="p-8">
      <div class="flex items-center justify-between mb-8">
       <div>
        <h2 class="text-3xl font-bold text-gray-900">Products Management</h2>
        <p class="text-gray-500 mt-1">Manage your product inventory</p>
       </div><button onclick="openAddProductModal()" class="px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg font-semibold hover:opacity-90 flex items-center gap-2">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
        </svg> Add Product </button>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6" id="products-grid"><!-- Products will be populated by JavaScript -->
      </div>
      <div id="no-products-message" class="bg-white rounded-xl border border-gray-200 p-12 text-center hidden">
       <div class="text-6xl mb-4">
        ðŸ“¦
       </div>
       <h3 class="text-lg font-semibold text-gray-800">No products yet</h3>
       <p class="text-gray-500 mt-1">Add your first product to get started</p><button onclick="openAddProductModal()" class="mt-4 px-6 py-2 bg-purple-600 text-white rounded-lg font-semibold">Add Product</button>
      </div>
     </div>
    </div><!-- Customers Page -->
    <div id="customers-page" class="page">
     <div class="p-8">
      <div class="flex items-center justify-between mb-8">
       <div>
        <h2 class="text-3xl font-bold text-gray-900">Customers</h2>
        <p class="text-gray-500 mt-1">View and manage customer information</p>
       </div>
      </div>
      <div class="bg-white rounded-xl border border-gray-200">
       <div class="overflow-x-auto">
        <table class="w-full">
         <thead class="bg-gray-50 border-b border-gray-200">
          <tr>
           <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Customer Name</th>
           <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Phone</th>
           <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">City</th>
           <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Total Orders</th>
           <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Total Spent</th>
           <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Last Order</th>
          </tr>
         </thead>
         <tbody id="customers-table-body" class="divide-y divide-gray-200"><!-- Customers will be populated by JavaScript -->
         </tbody>
        </table>
       </div>
       <div id="no-customers-message" class="p-12 text-center hidden">
        <div class="text-6xl mb-4">
         ðŸ‘¥
        </div>
        <h3 class="text-lg font-semibold text-gray-800">No customers yet</h3>
        <p class="text-gray-500 mt-1">Customer data will appear when orders are placed</p>
       </div>
      </div>
     </div>
    </div><!-- Analytics Page -->
    <div id="analytics-page" class="page">
     <div class="p-8">
      <div class="flex items-center justify-between mb-8">
       <div>
        <h2 class="text-3xl font-bold text-gray-900">Analytics</h2>
        <p class="text-gray-500 mt-1">Sales and performance insights</p>
       </div><select class="px-4 py-2 border border-gray-300 rounded-lg bg-white"> <option>Last 7 days</option> <option>Last 30 days</option> <option>Last 3 months</option> <option>Last year</option> </select>
      </div>
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
       <div class="bg-white rounded-xl border border-gray-200 p-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Sales Overview</h3>
        <div id="sales-chart" class="space-y-4">
         <div class="flex items-center justify-between"><span class="text-sm text-gray-600">This Week</span> <span id="sales-this-week" class="font-semibold text-gray-900">â‚¹0</span>
         </div>
         <div class="w-full bg-gray-200 rounded-full h-2">
          <div id="sales-week-bar" class="bg-gradient-to-r from-purple-600 to-indigo-600 h-2 rounded-full" style="width: 0%"></div>
         </div>
         <div class="flex items-center justify-between"><span class="text-sm text-gray-600">This Month</span> <span id="sales-this-month" class="font-semibold text-gray-900">â‚¹0</span>
         </div>
         <div class="w-full bg-gray-200 rounded-full h-2">
          <div id="sales-month-bar" class="bg-gradient-to-r from-green-500 to-teal-500 h-2 rounded-full" style="width: 0%"></div>
         </div>
        </div>
       </div>
       <div class="bg-white rounded-xl border border-gray-200 p-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Category Performance</h3>
        <div id="category-chart" class="space-y-3"><!-- Chart will be populated by JavaScript -->
        </div>
       </div>
      </div>
      <div class="bg-white rounded-xl border border-gray-200 p-6">
       <h3 class="text-lg font-semibold text-gray-900 mb-4">Payment Methods</h3>
       <div id="payment-methods-chart" class="grid grid-cols-2 md:grid-cols-4 gap-4"><!-- Chart will be populated by JavaScript -->
       </div>
      </div>
     </div>
    </div><!-- Settings Page -->
    <div id="settings-page" class="page">
     <div class="p-8">
      <div class="mb-8">
       <h2 class="text-3xl font-bold text-gray-900">Settings</h2>
       <p class="text-gray-500 mt-1">Manage your admin panel settings</p>
      </div>
      <div class="max-w-4xl space-y-6">
       <div class="bg-white rounded-xl border border-gray-200 p-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Store Information</h3>
        <div class="space-y-4">
         <div><label class="block text-sm font-medium text-gray-700 mb-2">Store Name</label> <input type="text" id="store-name" value="Swagkart" class="w-full px-4 py-3 border border-gray-300 rounded-lg">
         </div>
         <div><label class="block text-sm font-medium text-gray-700 mb-2">Store Email</label> <input type="email" value="contact@swagkart.com" class="w-full px-4 py-3 border border-gray-300 rounded-lg">
         </div>
         <div><label class="block text-sm font-medium text-gray-700 mb-2">Support Phone</label> <input type="tel" value="+91 1234567890" class="w-full px-4 py-3 border border-gray-300 rounded-lg">
         </div>
        </div>
       </div>
       <div class="bg-white rounded-xl border border-gray-200 p-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Notifications</h3>
        <div class="space-y-3"><label class="flex items-center justify-between"> <span class="text-gray-700">Email notifications for new orders</span> <input type="checkbox" checked class="w-5 h-5 text-purple-600 rounded"> </label> <label class="flex items-center justify-between"> <span class="text-gray-700">Low stock alerts</span> <input type="checkbox" checked class="w-5 h-5 text-purple-600 rounded"> </label> <label class="flex items-center justify-between"> <span class="text-gray-700">Daily sales summary</span> <input type="checkbox" class="w-5 h-5 text-purple-600 rounded"> </label>
        </div>
       </div>
       <div class="bg-white rounded-xl border border-gray-200 p-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Data Management</h3>
        <div class="space-y-3"><button onclick="exportData()" class="w-full px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center justify-center gap-2">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
          </svg> Export All Data </button> <button onclick="showClearDataConfirmation()" class="w-full px-6 py-3 border border-red-300 text-red-600 rounded-lg hover:bg-red-50 flex items-center justify-center gap-2">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
          </svg> Clear All Data </button>
        </div>
       </div>
      </div>
     </div>
    </div>
   </main>
  </div><!-- Add/Edit Product Modal -->
  <div id="product-modal" class="modal">
   <div class="modal-content p-6">
    <div class="flex items-center justify-between mb-6">
     <h3 id="product-modal-title" class="text-xl font-bold text-gray-900">Add Product</h3><button onclick="closeProductModal()" class="w-8 h-8 rounded-lg hover:bg-gray-100 flex items-center justify-center">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg></button>
    </div>
    <form id="product-form" onsubmit="saveProduct(event)">
     <div class="space-y-4">
      <div><label class="block text-sm font-medium text-gray-700 mb-2">Product Name *</label> <input type="text" id="product-name" required class="w-full px-4 py-3 border border-gray-300 rounded-lg" placeholder="Enter product name">
      </div>
      <div class="grid grid-cols-2 gap-4">
       <div><label class="block text-sm font-medium text-gray-700 mb-2">Price *</label> <input type="number" id="product-price" required min="0" class="w-full px-4 py-3 border border-gray-300 rounded-lg" placeholder="999">
       </div>
       <div><label class="block text-sm font-medium text-gray-700 mb-2">Original Price</label> <input type="number" id="product-original-price" min="0" class="w-full px-4 py-3 border border-gray-300 rounded-lg" placeholder="1499">
       </div>
      </div>
      <div><label class="block text-sm font-medium text-gray-700 mb-2">Category *</label> <select id="product-category" required class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-white"> <option value="">Select category</option> <option value="mens">Men's Fashion</option> <option value="womens">Women's Fashion</option> <option value="kids">Kid's Fashion</option> <option value="others">Others/Accessories</option> </select>
      </div>
      <div><label class="block text-sm font-medium text-gray-700 mb-2">Emoji/Icon *</label> <input type="text" id="product-emoji" required maxlength="2" class="w-full px-4 py-3 border border-gray-300 rounded-lg text-3xl text-center" placeholder="ðŸ‘•">
       <p class="text-xs text-gray-500 mt-1">Select an emoji to represent your product</p>
      </div>
      <div><label class="block text-sm font-medium text-gray-700 mb-2">Stock Quantity</label> <input type="number" id="product-stock" min="0" value="100" class="w-full px-4 py-3 border border-gray-300 rounded-lg" placeholder="100">
      </div>
      <div><label class="block text-sm font-medium text-gray-700 mb-2">Description *</label> <textarea id="product-description" required rows="4" class="w-full px-4 py-3 border border-gray-300 rounded-lg resize-none" placeholder="Enter product description"></textarea>
      </div>
      <div class="flex items-center gap-3"><input type="checkbox" id="product-active" checked class="w-5 h-5 text-purple-600 rounded"> <label for="product-active" class="text-sm text-gray-700">Product is active and visible to customers</label>
      </div>
     </div>
     <div class="flex gap-3 mt-6"><button type="button" onclick="closeProductModal()" class="flex-1 px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50">Cancel</button> <button type="submit" id="product-submit-btn" class="flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg font-semibold hover:opacity-90"> Add Product </button>
     </div>
    </form>
   </div>
  </div><!-- Order Details Modal -->
  <div id="order-modal" class="modal">
   <div class="modal-content p-6">
    <div class="flex items-center justify-between mb-6">
     <h3 class="text-xl font-bold text-gray-900">Order Details</h3><button onclick="closeOrderModal()" class="w-8 h-8 rounded-lg hover:bg-gray-100 flex items-center justify-center">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg></button>
    </div>
    <div id="order-details-content" class="space-y-6"><!-- Content will be populated by JavaScript -->
    </div>
   </div>
  </div><!-- Confirmation Modal -->
  <div id="confirmation-modal" class="modal">
   <div class="modal-content p-6 max-w-md">
    <div class="text-center mb-6">
     <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
      <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
      </svg>
     </div>
     <h3 class="text-xl font-bold text-gray-900 mb-2">Are you sure?</h3>
     <p id="confirmation-message" class="text-gray-600"></p>
    </div>
    <div class="flex gap-3"><button onclick="closeConfirmationModal()" class="flex-1 px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50">Cancel</button> <button id="confirm-action-btn" class="flex-1 px-6 py-3 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700">Confirm</button>
    </div>
   </div>
  </div><!-- Toast -->
  <div id="toast" class="toast">
   Action completed
  </div>
  <script>
    // Default configuration
    const defaultConfig = {
      panel_title: 'Swagkart',
      company_name: 'Swagkart',
      primary_color: '#8b5cf6',
      secondary_color: '#6366f1',
      background_color: '#f9fafb',
      text_color: '#111827',
      success_color: '#10b981'
    };

    // App State
    let allOrders = [];
    let allProducts = [];
    let currentEditingProduct = null;
    let currentOrderFilter = 'all';
    let confirmationCallback = null;

    // Initialize App
    async function initApp() {
      // Initialize Element SDK
      if (window.elementSdk) {
        await window.elementSdk.init({
          defaultConfig,
          onConfigChange: async (config) => {
            applyConfig(config);
          },
          mapToCapabilities: (config) => ({
            recolorables: [
              {
                get: () => config.background_color || defaultConfig.background_color,
                set: (value) => window.elementSdk.setConfig({ background_color: value })
              },
              {
                get: () => config.primary_color || defaultConfig.primary_color,
                set: (value) => window.elementSdk.setConfig({ primary_color: value })
              },
              {
                get: () => config.text_color || defaultConfig.text_color,
                set: (value) => window.elementSdk.setConfig({ text_color: value })
              },
              {
                get: () => config.secondary_color || defaultConfig.secondary_color,
                set: (value) => window.elementSdk.setConfig({ secondary_color: value })
              },
              {
                get: () => config.success_color || defaultConfig.success_color,
                set: (value) => window.elementSdk.setConfig({ success_color: value })
              }
            ],
            borderables: [],
            fontEditable: undefined,
            fontSizeable: undefined
          }),
          mapToEditPanelValues: (config) => new Map([
            ['panel_title', config.panel_title || defaultConfig.panel_title],
            ['company_name', config.company_name || defaultConfig.company_name]
          ])
        });
      }

      // Initialize Data SDK
      if (window.dataSdk) {
        const result = await window.dataSdk.init({
          onDataChanged: (data) => {
            allOrders = data.filter(item => item.type === 'order');
            allProducts = data.filter(item => item.type === 'product');
            updateAllViews();
          }
        });
        if (!result.isOk) {
          console.error('Failed to initialize Data SDK');
        }
      }

      applyConfig(defaultConfig);
    }

    // Apply configuration
    function applyConfig(config) {
      const panelTitle = config.panel_title || defaultConfig.panel_title;
      const companyName = config.company_name || defaultConfig.company_name;

      const titleEl = document.getElementById('panel-title');
      if (titleEl) titleEl.textContent = panelTitle;
    }

    // Navigation
    function navigateTo(page) {
      // Update sidebar
      document.querySelectorAll('.sidebar-item').forEach(item => item.classList.remove('active'));
      event.target.closest('.sidebar-item').classList.add('active');
      
      // Update pages
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById(page + '-page').classList.add('active');
    }

    // Update all views
    function updateAllViews() {
      updateDashboard();
      updateOrdersTable();
      updateProductsGrid();
      updateCustomersTable();
      updateAnalytics();
    }

    // Dashboard
    function updateDashboard() {
      // Stats
      document.getElementById('stat-total-orders').textContent = allOrders.length;
      const revenue = allOrders.reduce((sum, order) => sum + (order.product_price || 0), 0);
      document.getElementById('stat-revenue').textContent = `â‚¹${revenue.toLocaleString()}`;
      document.getElementById('stat-total-products').textContent = allProducts.length;
      
      const uniqueCustomers = new Set(allOrders.map(o => o.customer_phone)).size;
      document.getElementById('stat-customers').textContent = uniqueCustomers;
      
      // Recent orders
      const recentOrders = [...allOrders].sort((a, b) => 
        new Date(b.order_date) - new Date(a.order_date)
      ).slice(0, 5);
      
      const recentOrdersTable = document.getElementById('recent-orders-table');
      if (recentOrders.length > 0) {
        recentOrdersTable.innerHTML = `
          <table class="w-full">
            <thead class="bg-gray-50 border-b border-gray-200">
              <tr>
                <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Order ID</th>
                <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Customer</th>
                <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Amount</th>
                <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Status</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-200">
              ${recentOrders.map(order => `
                <tr class="table-row">
                  <td class="px-6 py-4 text-sm font-mono text-purple-600">#${order.tracking_id}</td>
                  <td class="px-6 py-4 text-sm text-gray-900">${order.customer_name}</td>
                  <td class="px-6 py-4 text-sm font-semibold text-gray-900">â‚¹${order.product_price}</td>
                  <td class="px-6 py-4">
                    <span class="badge ${order.order_status}">${order.order_status}</span>
                  </td>
                </tr>
              `).join('')}
            </tbody>
          </table>
        `;
      } else {
        recentOrdersTable.innerHTML = '<div class="p-8 text-center text-gray-500">No orders yet</div>';
      }
      
      // Order status distribution
      const statusCounts = {};
      allOrders.forEach(order => {
        statusCounts[order.order_status] = (statusCounts[order.order_status] || 0) + 1;
      });
      
      const orderStatusChart = document.getElementById('order-status-chart');
      const totalOrders = allOrders.length || 1;
      orderStatusChart.innerHTML = Object.entries(statusCounts).map(([status, count]) => {
        const percentage = (count / totalOrders * 100).toFixed(1);
        return `
          <div>
            <div class="flex items-center justify-between mb-1">
              <span class="text-sm capitalize text-gray-600">${status}</span>
              <span class="text-sm font-semibold text-gray-900">${count} (${percentage}%)</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
              <div class="bg-purple-600 h-2 rounded-full" style="width: ${percentage}%"></div>
            </div>
          </div>
        `;
      }).join('') || '<p class="text-gray-500 text-sm">No data available</p>';
      
      // Top products (placeholder)
      const topProductsList = document.getElementById('top-products-list');
      if (allProducts.length > 0) {
        topProductsList.innerHTML = allProducts.slice(0, 5).map((product, i) => `
          <div class="flex items-center gap-3">
            <span class="text-2xl">${i + 1}.</span>
            <div class="w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center text-2xl">
              ${product.product_image}
            </div>
            <div class="flex-1">
              <p class="text-sm font-medium text-gray-900">${product.product_name}</p>
              <p class="text-xs text-gray-500">â‚¹${product.product_price}</p>
            </div>
          </div>
        `).join('');
      } else {
        topProductsList.innerHTML = '<p class="text-gray-500 text-sm">No products available</p>';
      }
    }

    function refreshDashboard() {
      updateDashboard();
      showToast('Dashboard refreshed', 'success');
    }

    // Orders
    function updateOrdersTable() {
      const tbody = document.getElementById('orders-table-body');
      const noOrdersMsg = document.getElementById('no-orders-message');
      
      let ordersToShow = allOrders;
      if (currentOrderFilter !== 'all') {
        ordersToShow = allOrders.filter(o => o.order_status === currentOrderFilter);
      }
      
      document.getElementById('orders-badge').textContent = allOrders.length;
      
      if (ordersToShow.length > 0) {
        noOrdersMsg.classList.add('hidden');
        tbody.innerHTML = ordersToShow.map(order => `
          <tr class="table-row">
            <td class="px-6 py-4 text-sm font-mono text-purple-600">#${order.tracking_id}</td>
            <td class="px-6 py-4">
              <div class="text-sm font-medium text-gray-900">${order.customer_name}</div>
              <div class="text-xs text-gray-500">${order.customer_phone}</div>
            </td>
            <td class="px-6 py-4 text-sm text-gray-900">${order.product_name}</td>
            <td class="px-6 py-4 text-sm font-semibold text-gray-900">â‚¹${order.product_price}</td>
            <td class="px-6 py-4">
              <select onchange="updateOrderStatus('${order.__backendId}', this.value)" class="badge ${order.order_status} border-0 cursor-pointer">
                <option value="pending" ${order.order_status === 'pending' ? 'selected' : ''}>Pending</option>
                <option value="confirmed" ${order.order_status === 'confirmed' ? 'selected' : ''}>Confirmed</option>
                <option value="packed" ${order.order_status === 'packed' ? 'selected' : ''}>Packed</option>
                <option value="shipped" ${order.order_status === 'shipped' ? 'selected' : ''}>Shipped</option>
                <option value="delivered" ${order.order_status === 'delivered' ? 'selected' : ''}>Delivered</option>
                <option value="cancelled" ${order.order_status === 'cancelled' ? 'selected' : ''}>Cancelled</option>
              </select>
            </td>
            <td class="px-6 py-4 text-sm text-gray-500">
              ${new Date(order.order_date).toLocaleDateString('en-IN', { month: 'short', day: 'numeric', year: 'numeric' })}
            </td>
            <td class="px-6 py-4">
              <div class="flex gap-2">
                <button onclick="viewOrderDetails('${order.__backendId}')" class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg" title="View Details">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                  </svg>
                </button>
                <button onclick="showDeleteOrderConfirmation('${order.__backendId}')" class="p-2 text-red-600 hover:bg-red-50 rounded-lg" title="Delete Order">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                  </svg>
                </button>
              </div>
            </td>
          </tr>
        `).join('');
      } else {
        noOrdersMsg.classList.remove('hidden');
        tbody.innerHTML = '';
      }
    }

    function filterOrders(status) {
      currentOrderFilter = status;
      updateOrdersTable();
    }

    async function updateOrderStatus(orderId, newStatus) {
      const order = allOrders.find(o => o.__backendId === orderId);
      if (!order) return;
      
      order.order_status = newStatus;
      order.last_updated = new Date().toISOString();
      
      if (window.dataSdk) {
        const result = await window.dataSdk.update(order);
        if (result.isOk) {
          showToast('Order status updated', 'success');
        } else {
          showToast('Failed to update status', 'error');
        }
      } else {
        updateAllViews();
      }
    }

    function viewOrderDetails(orderId) {
      const order = allOrders.find(o => o.__backendId === orderId);
      if (!order) return;
      
      const content = document.getElementById('order-details-content');
      content.innerHTML = `
        <div class="space-y-4">
          <div class="flex items-center justify-between p-4 bg-purple-50 rounded-lg">
            <span class="text-sm text-gray-600">Order ID</span>
            <span class="font-mono font-semibold text-purple-600">#${order.tracking_id}</span>
          </div>
          
          <div class="border-t pt-4">
            <h4 class="font-semibold text-gray-900 mb-3">Customer Information</h4>
            <div class="space-y-2 text-sm">
              <div class="flex justify-between">
                <span class="text-gray-600">Name:</span>
                <span class="font-medium">${order.customer_name}</span>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-600">Phone:</span>
                <span class="font-medium">${order.customer_phone}</span>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-600">City:</span>
                <span class="font-medium">${order.customer_city}</span>
              </div>
              <div class="mt-2">
                <span class="text-gray-600">Address:</span>
                <p class="mt-1 text-gray-900">${order.customer_address}</p>
              </div>
            </div>
          </div>
          
          <div class="border-t pt-4">
            <h4 class="font-semibold text-gray-900 mb-3">Order Details</h4>
            <div class="space-y-2 text-sm">
              <div class="flex justify-between">
                <span class="text-gray-600">Product:</span>
                <span class="font-medium">${order.product_name}</span>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-600">Quantity:</span>
                <span class="font-medium">${order.quantity}</span>
              </div>
              ${order.size ? `<div class="flex justify-between">
                <span class="text-gray-600">Size:</span>
                <span class="font-medium">${order.size}</span>
              </div>` : ''}
              ${order.color ? `<div class="flex justify-between">
                <span class="text-gray-600">Color:</span>
                <span class="font-medium">${order.color}</span>
              </div>` : ''}
              <div class="flex justify-between">
                <span class="text-gray-600">Payment Method:</span>
                <span class="font-medium uppercase">${order.payment_method}</span>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-600">Status:</span>
                <span class="badge ${order.order_status}">${order.order_status}</span>
              </div>
              <div class="flex justify-between pt-3 border-t">
                <span class="text-gray-900 font-semibold">Total Amount:</span>
                <span class="text-xl font-bold text-purple-600">â‚¹${order.product_price}</span>
              </div>
            </div>
          </div>
        </div>
      `;
      
      document.getElementById('order-modal').classList.add('show');
    }

    function closeOrderModal() {
      document.getElementById('order-modal').classList.remove('show');
    }

    function showDeleteOrderConfirmation(orderId) {
      document.getElementById('confirmation-message').textContent = 
        'This will permanently delete this order. This action cannot be undone.';
      confirmationCallback = () => deleteOrder(orderId);
      document.getElementById('confirmation-modal').classList.add('show');
    }

    async function deleteOrder(orderId) {
      const order = allOrders.find(o => o.__backendId === orderId);
      if (!order) return;
      
      if (window.dataSdk) {
        const result = await window.dataSdk.delete(order);
        if (result.isOk) {
          showToast('Order deleted successfully', 'success');
        } else {
          showToast('Failed to delete order', 'error');
        }
      } else {
        allOrders = allOrders.filter(o => o.__backendId !== orderId);
        updateAllViews();
      }
      
      closeConfirmationModal();
    }

    // Products
    function updateProductsGrid() {
      const grid = document.getElementById('products-grid');
      const noProductsMsg = document.getElementById('no-products-message');
      
      if (allProducts.length > 0) {
        noProductsMsg.classList.add('hidden');
        grid.innerHTML = allProducts.map(product => `
          <div class="bg-white rounded-xl border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow">
            <div class="bg-gradient-to-br from-gray-100 to-gray-200 h-40 flex items-center justify-center text-6xl">
              ${product.product_image}
            </div>
            <div class="p-4">
              <h3 class="font-semibold text-gray-900 mb-1">${product.product_name}</h3>
              <p class="text-xs text-gray-500 mb-2 capitalize">${getCategoryLabel(product.product_category)}</p>
              <div class="flex items-center gap-2 mb-3">
                <span class="text-lg font-bold text-purple-600">â‚¹${product.product_price}</span>
                ${product.original_price ? `<span class="text-sm text-gray-400 line-through">â‚¹${product.original_price}</span>` : ''}
              </div>
              <div class="flex items-center justify-between mb-3">
                <span class="text-xs text-gray-500">Stock: ${product.stock || 0}</span>
                <span class="badge ${product.is_active ? 'delivered' : 'cancelled'} text-xs">
                  ${product.is_active ? 'Active' : 'Inactive'}
                </span>
              </div>
              <div class="flex gap-2">
                <button onclick="editProduct('${product.__backendId}')" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm font-medium">
                  Edit
                </button>
                <button onclick="showDeleteProductConfirmation('${product.__backendId}')" class="px-3 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>
        `).join('');
      } else {
        noProductsMsg.classList.remove('hidden');
        grid.innerHTML = '';
      }
    }

    function getCategoryLabel(category) {
      const labels = {
        mens: "Men's Fashion",
        womens: "Women's Fashion",
        kids: "Kid's Fashion",
        others: "Accessories"
      };
      return labels[category] || category;
    }

    function openAddProductModal() {
      currentEditingProduct = null;
      document.getElementById('product-modal-title').textContent = 'Add Product';
      document.getElementById('product-submit-btn').textContent = 'Add Product';
      document.getElementById('product-form').reset();
      document.getElementById('product-active').checked = true;
      document.getElementById('product-modal').classList.add('show');
    }

    function editProduct(productId) {
      const product = allProducts.find(p => p.__backendId === productId);
      if (!product) return;
      
      currentEditingProduct = product;
      document.getElementById('product-modal-title').textContent = 'Edit Product';
      document.getElementById('product-submit-btn').textContent = 'Update Product';
      
      document.getElementById('product-name').value = product.product_name;
      document.getElementById('product-price').value = product.product_price;
      document.getElementById('product-original-price').value = product.original_price || '';
      document.getElementById('product-category').value = product.product_category;
      document.getElementById('product-emoji').value = product.product_image;
      document.getElementById('product-stock').value = product.stock || 100;
      document.getElementById('product-description').value = product.description;
      document.getElementById('product-active').checked = product.is_active !== false;
      
      document.getElementById('product-modal').classList.add('show');
    }

    async function saveProduct(event) {
      event.preventDefault();
      
      if (allProducts.length >= 999 && !currentEditingProduct) {
        showToast('Product limit reached (999)', 'error');
        return;
      }
      
      const productData = {
        type: 'product',
        product_id: currentEditingProduct ? currentEditingProduct.product_id : 'p' + Date.now(),
        product_name: document.getElementById('product-name').value,
        product_price: parseFloat(document.getElementById('product-price').value),
        original_price: parseFloat(document.getElementById('product-original-price').value) || null,
        product_category: document.getElementById('product-category').value,
        product_image: document.getElementById('product-emoji').value,
        stock: parseInt(document.getElementById('product-stock').value) || 100,
        description: document.getElementById('product-description').value,
        is_active: document.getElementById('product-active').checked,
        created_date: currentEditingProduct ? currentEditingProduct.created_date : new Date().toISOString(),
        last_updated: new Date().toISOString()
      };
      
      if (window.dataSdk) {
        if (currentEditingProduct) {
          productData.__backendId = currentEditingProduct.__backendId;
          const result = await window.dataSdk.update(productData);
          if (result.isOk) {
            showToast('Product updated successfully', 'success');
            closeProductModal();
          } else {
            showToast('Failed to update product', 'error');
          }
        } else {
          const result = await window.dataSdk.create(productData);
          if (result.isOk) {
            showToast('Product added successfully', 'success');
            closeProductModal();
          } else {
            showToast('Failed to add product', 'error');
          }
        }
      }
    }

    function closeProductModal() {
      document.getElementById('product-modal').classList.remove('show');
      currentEditingProduct = null;
    }

    function showDeleteProductConfirmation(productId) {
      document.getElementById('confirmation-message').textContent = 
        'This will permanently delete this product. This action cannot be undone.';
      confirmationCallback = () => deleteProduct(productId);
      document.getElementById('confirmation-modal').classList.add('show');
    }

    async function deleteProduct(productId) {
      const product = allProducts.find(p => p.__backendId === productId);
      if (!product) return;
      
      if (window.dataSdk) {
        const result = await window.dataSdk.delete(product);
        if (result.isOk) {
          showToast('Product deleted successfully', 'success');
        } else {
          showToast('Failed to delete product', 'error');
        }
      } else {
        allProducts = allProducts.filter(p => p.__backendId !== productId);
        updateAllViews();
      }
      
      closeConfirmationModal();
    }

    // Customers
    function updateCustomersTable() {
      const tbody = document.getElementById('customers-table-body');
      const noCustomersMsg = document.getElementById('no-customers-message');
      
      // Group orders by customer
      const customerMap = new Map();
      allOrders.forEach(order => {
        const key = order.customer_phone;
        if (!customerMap.has(key)) {
          customerMap.set(key, {
            name: order.customer_name,
            phone: order.customer_phone,
            city: order.customer_city,
            orders: [],
            totalSpent: 0
          });
        }
        const customer = customerMap.get(key);
        customer.orders.push(order);
        customer.totalSpent += order.product_price || 0;
      });
      
      const customers = Array.from(customerMap.values());
      
      if (customers.length > 0) {
        noCustomersMsg.classList.add('hidden');
        tbody.innerHTML = customers.map(customer => {
          const lastOrder = customer.orders.sort((a, b) => 
            new Date(b.order_date) - new Date(a.order_date)
          )[0];
          
          return `
            <tr class="table-row">
              <td class="px-6 py-4">
                <div class="text-sm font-medium text-gray-900">${customer.name}</div>
              </td>
              <td class="px-6 py-4 text-sm text-gray-900">${customer.phone}</td>
              <td class="px-6 py-4 text-sm text-gray-900">${customer.city}</td>
              <td class="px-6 py-4 text-sm font-semibold text-gray-900">${customer.orders.length}</td>
              <td class="px-6 py-4 text-sm font-semibold text-purple-600">â‚¹${customer.totalSpent.toLocaleString()}</td>
              <td class="px-6 py-4 text-sm text-gray-500">
                ${new Date(lastOrder.order_date).toLocaleDateString('en-IN', { month: 'short', day: 'numeric', year: 'numeric' })}
              </td>
            </tr>
          `;
        }).join('');
      } else {
        noCustomersMsg.classList.remove('hidden');
        tbody.innerHTML = '';
      }
    }

    // Analytics
    function updateAnalytics() {
      // Sales overview
      const now = new Date();
      const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
      const monthAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);
      
      const salesThisWeek = allOrders
        .filter(o => new Date(o.order_date) >= weekAgo)
        .reduce((sum, o) => sum + (o.product_price || 0), 0);
      
      const salesThisMonth = allOrders
        .filter(o => new Date(o.order_date) >= monthAgo)
        .reduce((sum, o) => sum + (o.product_price || 0), 0);
      
      const totalRevenue = allOrders.reduce((sum, o) => sum + (o.product_price || 0), 0);
      
      document.getElementById('sales-this-week').textContent = `â‚¹${salesThisWeek.toLocaleString()}`;
      document.getElementById('sales-this-month').textContent = `â‚¹${salesThisMonth.toLocaleString()}`;
      
      const weekPercent = totalRevenue > 0 ? (salesThisWeek / totalRevenue * 100) : 0;
      const monthPercent = totalRevenue > 0 ? (salesThisMonth / totalRevenue * 100) : 0;
      
      document.getElementById('sales-week-bar').style.width = `${weekPercent}%`;
      document.getElementById('sales-month-bar').style.width = `${monthPercent}%`;
      
      // Category performance
      const categoryMap = new Map();
      allOrders.forEach(order => {
        const cat = order.product_category || 'others';
        categoryMap.set(cat, (categoryMap.get(cat) || 0) + 1);
      });
      
      const categoryChart = document.getElementById('category-chart');
      const totalOrders = allOrders.length || 1;
      
      categoryChart.innerHTML = Array.from(categoryMap.entries()).map(([cat, count]) => {
        const percentage = (count / totalOrders * 100).toFixed(1);
        return `
          <div>
            <div class="flex items-center justify-between mb-1">
              <span class="text-sm capitalize text-gray-600">${getCategoryLabel(cat)}</span>
              <span class="text-sm font-semibold text-gray-900">${count} (${percentage}%)</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
              <div class="bg-indigo-600 h-2 rounded-full" style="width: ${percentage}%"></div>
            </div>
          </div>
        `;
      }).join('') || '<p class="text-gray-500 text-sm">No data available</p>';
      
      // Payment methods
      const paymentMap = new Map();
      allOrders.forEach(order => {
        const method = order.payment_method || 'cod';
        paymentMap.set(method, (paymentMap.get(method) || 0) + 1);
      });
      
      const paymentChart = document.getElementById('payment-methods-chart');
      paymentChart.innerHTML = Array.from(paymentMap.entries()).map(([method, count]) => {
        const percentage = (count / totalOrders * 100).toFixed(1);
        const methodNames = {
          cod: 'Cash on Delivery',
          upi: 'UPI',
          card: 'Card',
          netbanking: 'Net Banking'
        };
        return `
          <div class="bg-gray-50 rounded-lg p-4">
            <p class="text-2xl font-bold text-gray-900">${count}</p>
            <p class="text-xs text-gray-500 mt-1">${methodNames[method]}</p>
            <p class="text-xs text-purple-600 mt-1">${percentage}%</p>
          </div>
        `;
      }).join('');
    }

    // Settings
    function exportData() {
      const data = {
        orders: allOrders,
        products: allProducts,
        exportDate: new Date().toISOString()
      };
      
      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `swagkart-data-${Date.now()}.json`;
      a.click();
      URL.revokeObjectURL(url);
      
      showToast('Data exported successfully', 'success');
    }

    function showClearDataConfirmation() {
      document.getElementById('confirmation-message').textContent = 
        'This will permanently delete ALL orders and products. This action cannot be undone.';
      confirmationCallback = clearAllData;
      document.getElementById('confirmation-modal').classList.add('show');
    }

    async function clearAllData() {
      if (window.dataSdk) {
        // Delete all orders
        for (const order of allOrders) {
          await window.dataSdk.delete(order);
        }
        // Delete all products
        for (const product of allProducts) {
          await window.dataSdk.delete(product);
        }
        showToast('All data cleared successfully', 'success');
      }
      closeConfirmationModal();
    }

    // Confirmation Modal
    function closeConfirmationModal() {
      document.getElementById('confirmation-modal').classList.remove('show');
      confirmationCallback = null;
    }

    document.getElementById('confirm-action-btn').onclick = () => {
      if (confirmationCallback) {
        confirmationCallback();
      }
    };

    // Toast
    function showToast(message, type = 'success') {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.className = `toast ${type}`;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 3000);
    }

    // Initialize
    initApp();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9bc500b8300b9a95',t:'MTc2ODE0MDY4MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>